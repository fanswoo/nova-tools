<template>
  <div>
    <div
      v-for="(specificationName, index) in specificationNames"
      :key="specificationName.nameId"
      class="specification-names"
    >
      <input
        type="text"
        placeholder="規格"
        :value="specificationName.name"
        @input="changeName($event, index)"
      />
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, toRefs } from 'vue';
import { useStore } from '@/control-center/store/control-center-store';
import _ from 'lodash';

const props = defineProps({
  specificationNames: {
    type: Array,
    default: () => [],
  },
});

const store = useStore();
const { specificationNames } = toRefs(props);
const emit = defineEmits(['alterSpecificationName']);

function changeName(event, index) {
  _.debounce(() => {
    store.commit('ProductSpecification/setSpecificationNames', specificationNames.value);
    emit('alterSpecificationName', {
      index,
      field: 'name',
      value: event.target.value,
    });
  }, 500)();
}
</script>

