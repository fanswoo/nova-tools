<template>
  <div>
    <SpecificationColor :specificationColors="stateSpecificationColors" />
    <SpecificationName :specificationNames="stateSpecificationNames" />
    <SpecificationTable :specifications="stateSpecifications" :hasErp="false" />
  </div>
</template>

<script setup lang="ts">
import { ref, watch, onMounted, nextTick } from 'vue';
import { useStore } from '@/control-center/store/control-center-store';
import Color from '@fanswoo/control-center/pages/admin/custom-component/edit-control-center/line-content/shop/product/product/specification-color.vue';
import Name from '@fanswoo/control-center/pages/admin/custom-component/edit-control-center/line-content/shop/product/product/specification-name.vue';
import SpecificationTable from '@fanswoo/control-center/pages/admin/custom-component/edit-control-center/line-content/shop/product/product/specification-table-component.vue';
// import Color from '@fanswoo/control-center/pages/admin/custom-component/edit-control-center/line-content/shop/product/product/classes/specification-color.vue';
// import Specification from '@fanswoo/control-center/pages/admin/custom-component/edit-control-center/line-content/shop/product/product/classes/specification.vue';

const props = defineProps({
  specificationColors: {
    type: Array,
    default: () => [],
  },
  specificationNames: {
    type: Array,
    default: () => [],
  },
  specifications: {
    type: Array,
    default: () => [],
  },
  hasErp: {
    type: Boolean,
    default: false,
  },
});

const store = useStore();

const stateSpecifications = ref(store.state.ProductSpecification.specifications);
const stateSpecificationNames = ref(store.state.ProductSpecification.specificationNames);
const stateSpecificationColors = ref(store.state.ProductSpecification.specificationColors);

onMounted(() => {
    store.commit('ProductSpecification/setSpecificationNames', props.specificationNames);
    store.commit('ProductSpecification/setSpecificationColors', props.specificationColors);
    store.commit('ProductSpecification/setOriginSpecifications', props.specifications);
});

watch(() => props.specificationNames, (newVal) => {
  store.commit('ProductSpecification/setSpecificationNames', newVal);
  stateSpecificationNames.value = newVal;
}, { immediate: true });

watch(() => props.specificationColors, (newVal) => {
  store.commit('ProductSpecification/setSpecificationColors', newVal);
  stateSpecificationColors.value = newVal;
}, { immediate: true });

watch(() => props.specifications, (newVal) => {
  store.commit('ProductSpecification/setOriginSpecifications', newVal);
  stateSpecifications.value = newVal;
}, { immediate: true });
</script>

