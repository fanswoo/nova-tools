<template>
  <LineContentGroup
    :title="title"
    :styleClass="styleClass"
    :explanation="explanation"
    :explanationLinkTo="explanationLinkTo"
    :alert="alert"
    :beforeInputText="beforeInputText"
    :afterInputText="afterInputText"
  >
    <input
      v-model="filter"
      type="number"
      :name="inputName"
      :placeholder="inputPlaceholder"
      :style="inputWidth ? { width: inputWidth + 'px' } : null"
      :maxlength="inputMaxlength ? inputMaxlength : null"
      :disabled="disabled ? disabled : null"
      :readonly="readonly ? readonly : null"
      :max="inputMax ? inputMax : null"
      :min="inputMin ? inputMin : null"
    />
  </LineContentGroup>
</template>

<script lang="ts" setup>
import { ref, computed } from 'vue';
import LineContentGroup
  from '@fanswoo/control-center/custom-component/edit-control-center/line-content/base/line-content-group.vue';

const props = defineProps<{
  title: string;
  styleClass?: string;
  value?: number | string;
  inputName?: string;
  inputPlaceholder?: string;
  inputWidth?: number;
  inputMaxlength?: number;
  inputMax?: number;
  inputMin?: number;
  disabled?: boolean;
  readonly?: boolean;
  beforeInputText?: string;
  afterInputText?: string;
  explanation?: string;
  explanationLinkTo?: {};
  alert?: {};
}>();

const emit = defineEmits(['update:value']);

const valueSync = ref(props.value);
const filter = computed({
  get: () => valueSync.value,
  set: (value: number) => {
    if (!value || typeof value === 'string') {
      return;
    }
    if (value >= props.inputMin && value <= props.inputMax) {
      valueSync.value = value;
      emit('update:value', value);
    }
  },
});

</script>
