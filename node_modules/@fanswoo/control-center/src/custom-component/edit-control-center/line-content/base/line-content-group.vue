<template>
  <div class="line-content" :class="styleClass">
    <div class="title">
      {{ title }}
    </div>
    <div class="field">
      <div class="input-group">
          <span v-if="beforeInputText" class="input-group-text"
          >{{ beforeInputText }}
          </span>
        <slot/>
        <span v-if="afterInputText" class="input-group-text"
        >{{ afterInputText }}
          </span>
      </div>
      <p
        v-if="
            (explanationLinkTo && explanationLinkTo.to) ||
            (explanationLinkTo && explanationLinkTo.href)
          "
        class="explanation"
      >
        <a
          v-if="explanationLinkTo.href"
          :href="explanationLinkTo.href"
          :target="explanationLinkTo.targetBlank ? '_blank' : null"
        >{{ explanationLinkTo.text }}</a
        >
        <router-link
          v-if="explanationLinkTo.to"
          :to="explanationLinkTo.to"
          :target="explanationLinkTo.targetBlank ? '_blank' : null"
        >
          {{ explanationLinkTo.text }}
        </router-link>
      </p>
      <p v-if="explanation" class="explanation" v-text="explanation"></p>
      <div
        v-if="!isEmpty(alert) && alert.text"
        :class="['alert', alert.type]"
        role="alert"
        v-text="alert.text"
      ></div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { isEmpty } from 'lodash';

interface Alert {
  text: string;
  type: string;
}

interface ExplanationLinkTo {
  to: string;
  text: string;
}

const props = defineProps({
  title: {
    type: String,
    default: '',
  },
  beforeInputText: {
    type: String,
    default: '',
  },
  afterInputText: {
    type: String,
    default: '',
  },
  explanation: {
    type: String,
    default: '',
  },
  explanationLinkTo: {
    type: Object,
    default: () => ({}),
  },
  styleClass: {
    type: String,
    default: '',
  },
  alert: {
    type: Object,
    default: () => ({}),
  }
});
</script>

<style lang="scss" scoped>
@import '@fanswoo/control-center/style/control-center/layouts/edit/line-content.scss';
</style>
