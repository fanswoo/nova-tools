<script>
export default {
  methods: {
    displayLinkTo(originLink, key) {
      if (!originLink) {
        return;
      }

      const link = originLink.replace(/\$\{(.+?)\}/g, (match, value) => {
        const attributeName = value.replace('ORM.', '');
        return this.ORMs[key][attributeName];
      });

      return link;
    },
    getORMAttrValue(ORMKey, fieldKey) {
      let field = this.ControlCenter.TableList.fields[fieldKey].ORMAttr;

      if( !field.includes('.') )
      {
        return this.ORMs[ORMKey][field];
      }

      const fieldChildren = field.split('.');
      let attribute = this.ORMs[ORMKey];
      fieldChildren.forEach((item) => {
        if(!attribute) {
          return false;
        }
        attribute = attribute[item];
      });

      return attribute;
    },
    getORMAttrValueByName(ORMKey, attrName) {
      let ORMAttr = this.ORMs[ORMKey][attrName];
      // let ORMAttr = eval("this.ORMs[" + ORMKey + "]." + attrName);
      return ORMAttr;
    },
    changeORMId: function (id) {
      if (Object.keys(this.ControlCenter.batchSelectOptions).length == 0) {
        return false;
      }

      if (this.ORMCheckedIds.indexOf(id) > -1) {
        for (let key in this.ORMCheckedIds) {
          if (this.ORMCheckedIds[key] == id) {
            this.ORMCheckedIds.splice(key, 1);
          }
        }
      } else {
        this.ORMCheckedIds.push(id);
      }
    },
  },
};
</script>
