<template>
  <b-thead>
    <b-tr>
      <b-th
        scope="row"
        style="width: 30px"
        v-if="
          ControlCenter.batchSelectOptions &&
          Object.keys(ControlCenter.batchSelectOptions).length > 0
        "
      >
        <span class="checkbox-all">
          <b-form-checkbox
            v-model="checkboxAll"
            :value="true"
            :unchecked-value="false"
          />
        </span>
      </b-th>
      <template v-for="(field, key) in ControlCenter.TableList.fields" :key="key">
        <b-th
          scope="row"
          v-if="ControlCenter && ControlCenter.TableList && field.title"
          :style="{
            minWidth: field.minWidth + 'px',
            maxWidth: field.maxWidth + 'px',
          }"
        >
          <span :title="field.tooltip">
            {{ field.title }}
            <font-awesome-icon
              v-if="
                field.popover && field.popover.title && field.popover.content
              "
              class="font-awesome-icon"
              icon="question-circle"
              size="sm"
              :title="field.popover.title"
              v-b-popover.hover.html="field.popover.content"
            />
          </span>
        </b-th>
      </template>
      <b-th
        scope="row"
        style="min-width: 100px"
        v-if="
          ControlCenter &&
          ControlCenter.TableList &&
          ControlCenter.TableList.EditField &&
          ControlCenter.TableList.EditField.fields &&
          Object.keys(ControlCenter.TableList.EditField.fields).length > 0
        "
      >
        {{ ControlCenter.TableList.EditField.title }}
      </b-th>
    </b-tr>
  </b-thead>
</template>

<script>
// import SearchContentVue from '@fanswoo/core/vue/AjaxList/SearchContent';

export default {
  props: ['ControlCenter', 'ORMCheckedIds', 'ORMs'],
  data: () => {
    return {
      checkboxAll: false,
    };
  },
  watch: {
    checkboxAll() {
      this.clickCheckboxAll();
    },
  },
  components: {
    // searchBox: SearchBoxVue
  },
  methods: {
    clickCheckboxAll() {
      if (this.checkboxAll) {
        for (let ORM of this.ORMs) {
          if (this.ORMCheckedIds.indexOf(ORM.id) == -1) {
            this.ORMCheckedIds.push(ORM.id);
          }
        }
      } else {
        this.ORMCheckedIds.splice(0, this.ORMCheckedIds.length);
      }

      this.$emit('update:ORMCheckedIds');
    },
    // empty (item){
    //     let undef;
    //     let key;
    //     let i;
    //     let len;
    //     // let emptyValues = [undef, null, false, 0, '', '0'];
    //     let emptyValues = [undef, null, '', false];

    //     for (i = 0, len = emptyValues.length; i < len; i++) {
    //         if (item === emptyValues[i]) {
    //             return true;
    //         }
    //     }

    //     if (typeof item === 'object') {
    //         for (key in item) {
    //             if (item.hasOwnProperty(key)) {
    //                 return false;
    //             }
    //         }
    //         return true;
    //     }

    //     return false;
    // },
  },
  computed: {},
  mounted: function () {
  },
};
</script>

<style lang="scss" scoped>
.checkbox-all {
  :deep(input) {
    margin-top: 0.7em;
  }
}
</style>