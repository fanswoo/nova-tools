<template>
  <component :is="modalType" />
</template>

<script lang="ts">
import { defineComponent, getCurrentInstance, inject, onMounted } from 'vue';
import { ComponentLoader } from '@fanswoo/component-loader/main';
import _ from 'lodash';

export default defineComponent({
  name: 'RouteModalSwitch',

  props: {
    modalType: {
      type: String,
      default: ''
    }
  },

  setup(props) {
    const urlRootPath = inject('urlRootPath');

      const Loader = ComponentLoader.getInstance();
      const vueInstance = getCurrentInstance();
      if(!vueInstance.proxy.$.components) {
        vueInstance.proxy.$.components = [];
      }
      _.merge(vueInstance.proxy.$.components, Loader.loadComponents([
        {
          pageName: urlRootPath,
          themeName: 'routePage',
          typeName: 'routeModal',
        },
      ]));

    return {
      urlRootPath,
    };
  }
});
</script>
