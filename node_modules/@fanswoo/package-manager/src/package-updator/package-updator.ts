import { IPackageConfig } from '@/package-source/contracts/package';
import { execSync } from 'child_process';

export default class PackageUpdator {
  constructor(protected config: IPackageConfig) {
    this.config = config;
  }

  update(): boolean {
    const { packages } = this.config.platforms.find(
      (item) => item.name === 'npm',
    )!;

    const packagesString = packages
      .map((item) => {
        return item.name;
      })
      .join(' ');

    packages.forEach((item) => {
      execSync(`npm update ${packagesString}`);
    });

    return true;
  }
}
